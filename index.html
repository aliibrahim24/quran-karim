<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø¢Ù†Ø§Ø¡ Ø§Ù„Ù„ÙŠÙ„ ÙˆØ£Ø·Ø±Ø§Ù Ø§Ù„Ù†Ù‡Ø§Ø±</title>
<meta name="description" content="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ø³ØªÙ…Ø§Ø¹ ÙˆØªÙØ³ÙŠØ±. Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø¢Ù†Ø§Ø¡ Ø§Ù„Ù„ÙŠÙ„ ÙˆØ£Ø·Ø±Ø§Ù Ø§Ù„Ù†Ù‡Ø§Ø±">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
--primary:#0b3d3f;--primary-h:#14635e;--gold:#b8860b;--gold-l:#fdf3dc;
--bg:#faf7f2;--bg2:#fff;--bg3:#f3ede3;--txt:#1a1a2e;--txt2:#555;--txt3:#999;
--brd:#e6dfd3;--shd:0 2px 15px rgba(0,0,0,.07);--rad:14px;--rs:8px;
--fq:'Amiri Quran','Amiri',serif;--fu:'Cairo',sans-serif;--qs:28px;
--sw:310px;--ph:76px;
}
[data-theme=dark]{
--primary:#4ecdc4;--primary-h:#3db8b0;--gold:#d4a017;--gold-l:#2a2518;
--bg:#0d0d1a;--bg2:#161629;--bg3:#1a1a30;--txt:#e0e0e8;--txt2:#a0a0b8;--txt3:#6a6a80;
--brd:#2a2a42;--shd:0 2px 15px rgba(0,0,0,.3);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:var(--fu);background:var(--bg);color:var(--txt);line-height:1.8;transition:.3s}
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--gold);border-radius:3px}

/* === HEADER === */
.hdr{position:fixed;top:0;left:0;right:0;height:60px;background:linear-gradient(135deg,var(--primary),var(--primary-h));color:#fff;display:flex;align-items:center;justify-content:space-between;padding:0 16px;z-index:1000;box-shadow:0 3px 20px rgba(0,0,0,.2)}
.hdr-r{display:flex;align-items:center;gap:10px}
.hdr-logo{width:38px;height:38px}
.hdr-logo svg{width:100%;height:100%;fill:var(--gold)}
.hdr-t{font-size:16px;font-weight:700}
.hdr-st{font-size:10px;opacity:.8;margin-top:-3px}
.hdr-l{display:flex;gap:6px}
.hdr-b{background:rgba(255,255,255,.15);border:none;color:#fff;width:38px;height:38px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.3s;font-size:17px}
.hdr-b:hover{background:rgba(255,255,255,.28)}

/* === SIDEBAR === */
.side{width:var(--sw);background:var(--bg3);border-left:1px solid var(--brd);height:calc(100vh - 60px);position:fixed;top:60px;right:0;overflow-y:auto;transition:transform .3s;z-index:900}
.side-h{padding:14px;border-bottom:1px solid var(--brd);position:sticky;top:0;background:var(--bg3);z-index:5}
.srch{width:100%;padding:9px 38px 9px 14px;border:2px solid var(--brd);border-radius:var(--rad);background:var(--bg2);color:var(--txt);font-family:var(--fu);font-size:13px;outline:none;transition:.3s}
.srch:focus{border-color:var(--gold)}
.srch-i{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--txt3);pointer-events:none}
.s-box{position:relative}
.sl{list-style:none;padding:6px}
.si{display:flex;align-items:center;gap:10px;padding:9px 10px;border-radius:var(--rs);cursor:pointer;transition:.2s;margin-bottom:1px}
.si:hover{background:var(--gold-l)}
.si.act{background:var(--primary);color:#fff}
.sn{width:34px;height:34px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;background:var(--gold);color:#fff;border-radius:50%;transform:rotate(45deg);flex-shrink:0}
.sn span{transform:rotate(-45deg);display:block}
.si.act .sn{background:rgba(255,255,255,.2)}
.s-inf{flex:1;min-width:0}
.s-nm{font-size:14px;font-weight:600;line-height:1.4}
.s-mt{font-size:10px;color:var(--txt3);display:flex;gap:6px}
.si.act .s-mt{color:rgba(255,255,255,.65)}

/* === MAIN === */
.main{margin-right:var(--sw);padding-bottom:var(--ph);min-height:calc(100vh - 60px);margin-top:60px}

/* === WELCOME === */
.welc{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 60px - var(--ph));padding:40px 20px;text-align:center}
.welc-ic{width:100px;height:100px;margin-bottom:20px}
.welc-ic svg{width:100%;height:100%;fill:var(--gold)}
.welc-t{font-size:30px;font-weight:700;color:var(--primary);margin-bottom:6px;font-family:var(--fq)}
.welc-st{font-size:16px;color:var(--txt2);margin-bottom:28px}
.welc-ay{font-family:var(--fq);font-size:22px;color:var(--primary);max-width:580px;line-height:2.2;padding:18px 26px;background:var(--gold-l);border-radius:var(--rad);border:1px solid var(--gold);margin-bottom:10px}
.welc-ref{font-size:13px;color:var(--txt3)}
.welc-pick{margin-top:30px;font-size:14px;color:var(--txt2);padding:10px 20px;border:2px dashed var(--brd);border-radius:var(--rad)}

/* === SURAH VIEW === */
.sv{display:none;max-width:860px;margin:0 auto;padding:20px 16px}
.sv.show{display:block}
.sh{background:linear-gradient(135deg,var(--primary),var(--primary-h));color:#fff;border-radius:var(--rad);padding:28px;text-align:center;margin-bottom:22px;position:relative;overflow:hidden;box-shadow:var(--shd)}
.sh::before{content:'';position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(184,134,11,.12) 0%,transparent 70%)}
.sh-nm{font-family:var(--fq);font-size:38px;margin-bottom:4px;position:relative}
.sh-inf{font-size:13px;opacity:.82;display:flex;justify-content:center;gap:16px;flex-wrap:wrap;position:relative}

.bsm{text-align:center;font-family:var(--fq);font-size:30px;color:var(--primary);padding:16px;margin-bottom:16px}

/* === FONT SIZE === */
.fctrl{display:flex;align-items:center;gap:8px;justify-content:center;margin-bottom:14px}
.fb{background:var(--bg2);border:1px solid var(--brd);color:var(--txt);width:34px;height:34px;border-radius:50%;cursor:pointer;font-size:15px;display:flex;align-items:center;justify-content:center;transition:.3s}
.fb:hover{border-color:var(--gold);color:var(--gold)}
.fsl{font-size:12px;color:var(--txt3);min-width:28px;text-align:center}

/* === AYAHS === */
.ayc{background:var(--bg2);border-radius:var(--rad);padding:28px 24px;box-shadow:var(--shd);border:1px solid var(--brd);line-height:2.8}
.ayt{font-family:var(--fq);font-size:var(--qs);display:inline;cursor:pointer;transition:.2s}
.ayt:hover{color:var(--primary)}
.ayt.playing{color:var(--primary);background:var(--gold-l);border-radius:4px;padding:2px 6px}
.ayn{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;font-size:13px;font-family:var(--fu);font-weight:700;color:var(--gold);margin:0 3px;position:relative;vertical-align:middle;cursor:pointer;transition:.2s}
.ayn::before{content:'';position:absolute;width:100%;height:100%;border:2px solid var(--gold);border-radius:50%;transform:rotate(45deg)}
.ayn:hover{color:var(--primary)}
.ayn:hover::before{border-color:var(--primary)}

/* === AYAH TOOLTIP === */
.att{display:none;position:fixed;background:var(--bg2);border:1px solid var(--brd);border-radius:var(--rs);padding:6px;box-shadow:0 4px 20px rgba(0,0,0,.15);z-index:600;gap:2px}
.att.show{display:flex}
.att-b{background:none;border:none;padding:5px 10px;border-radius:6px;cursor:pointer;font-size:13px;color:var(--txt);font-family:var(--fu);transition:.2s;white-space:nowrap}
.att-b:hover{background:var(--gold-l);color:var(--primary)}

/* === TAFSIR === */
.tfp{display:none;background:var(--bg2);border-radius:var(--rad);padding:22px;margin-top:22px;box-shadow:var(--shd);border:1px solid var(--brd);border-right:4px solid var(--gold)}
.tfp.show{display:block}
.tf-hd{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;padding-bottom:10px;border-bottom:1px solid var(--brd)}
.tf-t{font-size:17px;font-weight:700;color:var(--primary)}
.tf-cl{background:none;border:none;font-size:22px;color:var(--txt3);cursor:pointer;padding:2px 6px}
.tf-ar{font-family:var(--fq);font-size:18px;color:var(--primary);margin-bottom:10px;padding:10px;background:var(--gold-l);border-radius:var(--rs)}
.tf-tx{font-size:15px;line-height:2;color:var(--txt2)}

/* === NAV === */
.snav{display:flex;justify-content:space-between;margin-top:28px;padding-top:18px;border-top:1px solid var(--brd)}
.nb{display:flex;align-items:center;gap:6px;padding:9px 18px;background:var(--primary);color:#fff;border:none;border-radius:var(--rs);cursor:pointer;font-family:var(--fu);font-size:13px;font-weight:600;transition:.3s}
.nb:hover{background:var(--primary-h)}
.nb:disabled{opacity:.4;cursor:not-allowed}

/* === AUDIO PLAYER === */
.apl{position:fixed;bottom:0;left:0;right:0;height:var(--ph);background:var(--bg2);border-top:1px solid var(--brd);display:flex;align-items:center;padding:0 16px;gap:12px;z-index:1000;box-shadow:0 -2px 15px rgba(0,0,0,.06)}
.pl-inf{flex:1;min-width:0}
.pl-sn{font-size:13px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.pl-an{font-size:11px;color:var(--txt3)}
.pl-ct{display:flex;align-items:center;gap:6px}
.pb{background:none;border:none;color:var(--txt);font-size:18px;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:.3s}
.pb:hover{background:var(--gold-l)}
.pb.ppb{width:44px;height:44px;background:var(--primary);color:#fff;font-size:20px}
.pb.ppb:hover{background:var(--primary-h)}
.pl-pr{flex:2;display:flex;align-items:center;gap:6px}
.prb{flex:1;height:4px;background:var(--brd);border-radius:2px;cursor:pointer;position:relative;overflow:hidden}
.prf{height:100%;background:var(--gold);border-radius:2px;width:0%;transition:width .1s}
.prt{font-size:11px;color:var(--txt3);min-width:36px;text-align:center}
.pl-rc{min-width:120px}
.rcs{width:100%;padding:5px 8px;border:1px solid var(--brd);border-radius:var(--rs);background:var(--bg);color:var(--txt);font-family:var(--fu);font-size:11px;outline:none;cursor:pointer}

/* === FOOTER === */
.ftr{background:var(--primary);color:rgba(255,255,255,.88);text-align:center;padding:28px 18px;margin-right:var(--sw)}
.ftr p{font-size:12px;margin-bottom:3px;line-height:1.8}
.ftr a{color:var(--gold);text-decoration:none}
.ftr-d{width:50px;height:2px;background:var(--gold);margin:10px auto}

/* === LOADING === */
.ldg{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:50px 20px}
.spn{width:42px;height:42px;border:3px solid var(--brd);border-top-color:var(--gold);border-radius:50%;animation:sp .7s linear infinite}
@keyframes sp{to{transform:rotate(360deg)}}
.ldg-t{margin-top:14px;color:var(--txt3);font-size:13px}

/* === OVERLAY === */
.ovl{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.45);z-index:850}
.ovl.show{display:block}

/* === BACK TOP === */
.btt{position:fixed;bottom:calc(var(--ph) + 16px);left:16px;width:40px;height:40px;background:var(--primary);color:#fff;border:none;border-radius:50%;cursor:pointer;font-size:18px;display:none;align-items:center;justify-content:center;z-index:800;box-shadow:var(--shd);transition:.3s}
.btt.show{display:flex}
.btt:hover{background:var(--primary-h);transform:translateY(-2px)}

/* === RESPONSIVE === */
@media(max-width:1024px){
.side{transform:translateX(100%)}
.side.open{transform:translateX(0)}
.main{margin-right:0}
.ftr{margin-right:0}
.ovl.show{display:block}
}
@media(max-width:768px){
.hdr-t{font-size:13px}
.hdr-st{display:none}
:root{--sw:280px;--qs:22px}
.sh-nm{font-size:30px}
.ayc{padding:18px 14px}
.bsm{font-size:22px}
.welc-t{font-size:22px}
.welc-ay{font-size:18px;padding:14px 18px}
.apl{flex-wrap:wrap;height:auto;padding:8px 12px;gap:6px}
.pl-pr{order:-1;width:100%;flex-basis:100%}
.pl-rc{min-width:90px}
}
@media(max-width:480px){
:root{--qs:19px}
.welc-ic{width:70px;height:70px}
.sh{padding:18px}
.sh-nm{font-size:26px}
}
</style>
</head>
<body>

<!-- HEADER -->
<header class="hdr">
<div class="hdr-r">
<div class="hdr-logo">
<svg viewBox="0 0 100 100"><path d="M50 10C50 10 28 5 8 18L8 82C28 72 50 76 50 76C50 76 72 72 92 82L92 18C72 5 50 10 50 10Z" opacity=".9"/><line x1="50" y1="14" x2="50" y2="76" stroke="#fff" stroke-width="1.5"/><circle cx="50" cy="32" r="7" fill="none" stroke="#fff" stroke-width="1"/><circle cx="50" cy="32" r="2.5" fill="#fff"/><line x1="20" y1="35" x2="42" y2="35" stroke="#fff" stroke-width=".6" opacity=".5"/><line x1="58" y1="35" x2="80" y2="35" stroke="#fff" stroke-width=".6" opacity=".5"/><line x1="20" y1="45" x2="42" y2="45" stroke="#fff" stroke-width=".6" opacity=".4"/><line x1="58" y1="45" x2="80" y2="45" stroke="#fff" stroke-width=".6" opacity=".4"/><line x1="20" y1="55" x2="42" y2="55" stroke="#fff" stroke-width=".6" opacity=".3"/><line x1="58" y1="55" x2="80" y2="55" stroke="#fff" stroke-width=".6" opacity=".3"/></svg>
</div>
<div>
<div class="hdr-t">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
<div class="hdr-st">Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø£Ø·Ø±Ø§Ù Ø§Ù„Ù„ÙŠÙ„ ÙˆØ¢Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø±</div>
</div>
</div>
<div class="hdr-l">
<button class="hdr-b" onclick="toggleTheme()" title="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
<button class="hdr-b" onclick="toggleSidebar()" title="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±">â˜°</button>
</div>
</header>

<!-- OVERLAY -->
<div class="ovl" id="overlay" onclick="toggleSidebar()"></div>

<!-- SIDEBAR -->
<aside class="side" id="sidebar">
<div class="side-h">
<div class="s-box">
<span class="srch-i">ğŸ”</span>
<input type="text" class="srch" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø©..." oninput="filterSurahs()">
</div>
</div>
<ul class="sl" id="surahList"></ul>
</aside>

<!-- MAIN CONTENT -->
<main class="main" id="mainContent">

<!-- WELCOME SCREEN -->
<div class="welc" id="welcomeScreen">
<div class="welc-ic">
<svg viewBox="0 0 100 100"><path d="M50 10C50 10 28 5 8 18L8 82C28 72 50 76 50 76C50 76 72 72 92 82L92 18C72 5 50 10 50 10Z" opacity=".9"/><line x1="50" y1="14" x2="50" y2="76" stroke="#fff" stroke-width="1.5"/><circle cx="50" cy="32" r="7" fill="none" stroke="#fff" stroke-width="1"/><circle cx="50" cy="32" r="2.5" fill="#fff"/></svg>
</div>
<h1 class="welc-t">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
<p class="welc-st">Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø£Ø·Ø±Ø§Ù Ø§Ù„Ù„ÙŠÙ„ ÙˆØ¢Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø±</p>
<div class="welc-ay">
ï´¿ Ø¥ÙÙ†ÙÙ‘ Ù‡ÙÙ€Ù°Ø°ÙØ§ Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ÙŠÙÙ‡Ù’Ø¯ÙÙŠ Ù„ÙÙ„ÙÙ‘ØªÙÙŠ Ù‡ÙÙŠÙ Ø£ÙÙ‚Ù’ÙˆÙÙ…Ù ÙˆÙÙŠÙØ¨ÙØ´ÙÙ‘Ø±Ù Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù ÙŠÙØ¹Ù’Ù…ÙÙ„ÙÙˆÙ†Ù Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ Ø£ÙÙ†ÙÙ‘ Ù„ÙÙ‡ÙÙ…Ù’ Ø£ÙØ¬Ù’Ø±Ù‹Ø§ ÙƒÙØ¨ÙÙŠØ±Ù‹Ø§ ï´¾
</div>
<p class="welc-ref">Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡ - Ø§Ù„Ø¢ÙŠØ© Ù©</p>
<p class="welc-pick">ğŸ‘ˆ Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</p>
</div>

<!-- SURAH VIEW -->
<div class="sv" id="surahView">
<div class="sh" id="surahHeader">
<div class="sh-nm" id="surahTitle"></div>
<div class="sh-inf" id="surahInfo"></div>
</div>
<div class="bsm" id="bismillah">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
<div class="fctrl">
<button class="fb" onclick="changeFontSize(-2)">âˆ’</button>
<span class="fsl" id="fontLabel">28</span>
<button class="fb" onclick="changeFontSize(2)">+</button>
<span style="font-size:11px;color:var(--txt3);margin-right:8px">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</span>
</div>
<div class="ayc" id="ayahsContainer"></div>

<!-- TAFSIR PANEL -->
<div class="tfp" id="tafsirPanel">
<div class="tf-hd">
<span class="tf-t">ğŸ“– ØªÙØ³ÙŠØ± Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠÙ†</span>
<button class="tf-cl" onclick="closeTafsir()">âœ•</button>
</div>
<div class="tf-ar" id="tafsirAyah"></div>
<div class="tf-tx" id="tafsirText"></div>
</div>

<!-- SURAH NAV -->
<div class="snav">
<button class="nb" id="prevBtn" onclick="navigateSurah(-1)">
<span>â†’</span> Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
</button>
<button class="nb" id="nextBtn" onclick="navigateSurah(1)">
Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© <span>â†</span>
</button>
</div>
</div>

<!-- FOOTER -->
<footer class="ftr" id="footer">
<div class="ftr-d"></div>
<p><strong>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø£Ø·Ø±Ø§Ù Ø§Ù„Ù„ÙŠÙ„ ÙˆØ¢Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø±</strong></p>
<div class="ftr-d"></div>
<p>Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ Ø§Ù„Ø´Ø±ÙŠÙ Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ÙØªÙˆØ­Ø© (AlQuran Cloud API)</p>
<p>Ø§Ù„ØªÙ„Ø§ÙˆØ§Øª Ø§Ù„ØµÙˆØªÙŠØ© Ù…Ù† Ù…ÙˆÙ‚Ø¹ EveryAyah.com - Ù…ØªØ§Ø­Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ</p>
<p>ØªÙØ³ÙŠØ± Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠÙ† - Ù…Ø¤Ù„Ù ÙÙŠ Ø§Ù„Ù‚Ø±Ù† Ø§Ù„ØªØ§Ø³Ø¹ Ø§Ù„Ù‡Ø¬Ø±ÙŠ - Ù…Ù„Ùƒ Ø¹Ø§Ù…</p>
<p>Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©: Amiri Ùˆ Cairo - Ø±Ø®ØµØ© SIL Ø§Ù„Ù…ÙØªÙˆØ­Ø©</p>
<div class="ftr-d"></div>
<p>âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ <strong>ØºÙŠØ± ØªØ§Ø¨Ø¹ Ù„Ø£ÙŠ Ø¬Ù‡Ø© Ø±Ø³Ù…ÙŠØ©</strong> - Ù‡Ùˆ Ø¬Ù‡Ø¯ Ø´Ø®ØµÙŠ Ù„Ø®Ø¯Ù…Ø© ÙƒØªØ§Ø¨ Ø§Ù„Ù„Ù‡</p>
<p>ğŸ“§ Ù„Ù„ØªÙˆØ§ØµÙ„: <a href="mailto:ali.ibrahim2150@gmail.com">ali.ibrahim2150@gmail.com</a></p>
<div class="ftr-d"></div>
<p style="font-size:11px;opacity:.7">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù…Ø­ÙÙˆØ¸Ø© Â© <span id="cyear"></span></p>
<p style="font-size:11px;opacity:.7">Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ ÙˆØ§Ù„ØªÙØ³ÙŠØ±ÙŠ Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…Ù„Ùƒ Ø¹Ø§Ù… ÙˆÙ…ÙØªÙˆØ­Ø© Ø§Ù„Ù…ØµØ¯Ø±</p>
</footer>
</main>

<!-- AYAH TOOLTIP -->
<div class="att" id="ayahTooltip">
<button class="att-b" onclick="playAyah(selectedAyahNum)">â–¶ ØªØ´ØºÙŠÙ„</button>
<button class="att-b" onclick="showTafsir(selectedAyahNum)">ğŸ“– ØªÙØ³ÙŠØ±</button>
<button class="att-b" onclick="copyAyah(selectedAyahNum)">ğŸ“‹ Ù†Ø³Ø®</button>
</div>

<!-- AUDIO PLAYER -->
<div class="apl" id="audioPlayer">
<div class="pl-inf">
<div class="pl-sn" id="plSurahName">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©</div>
<div class="pl-an" id="plAyahNum">â€”</div>
</div>
<div class="pl-ct">
<button class="pb" onclick="prevAyahAudio()" title="Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©">â®</button>
<button class="pb ppb" id="playPauseBtn" onclick="togglePlayPause()" title="ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù">â–¶</button>
<button class="pb" onclick="nextAyahAudio()" title="Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©">â­</button>
<button class="pb" id="repeatBtn" onclick="toggleRepeat()" title="ØªÙƒØ±Ø§Ø±" style="font-size:14px">ğŸ”</button>
</div>
<div class="pl-pr">
<span class="prt" id="curTime">0:00</span>
<div class="prb" id="progressBar" onclick="seekAudio(event)">
<div class="prf" id="progressFill"></div>
</div>
<span class="prt" id="durTime">0:00</span>
</div>
<div class="pl-rc">
<select class="rcs" id="reciterSelect" onchange="changeReciter()">
<option value="Alafasy_128kbps">Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
<option value="Abdul_Basit_Murattal_192kbps">Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· - Ù…Ø±ØªÙ„</option>
<option value="Husary_128kbps">Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ</option>
<option value="Minshawy_Murattal_128kbps">Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ - Ù…Ø±ØªÙ„</option>
<option value="Abdurrahmaan_As-Sudais_192kbps">Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø³Ø¯ÙŠØ³</option>
<option value="Abu_Bakr_Ash-Shaatree_128kbps">Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„Ø´Ø§Ø·Ø±ÙŠ</option>
<option value="Saood_ash-Shuraym_128kbps">Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø´Ø±ÙŠÙ…</option>
<option value="Hani_Rifai_192kbps">Ù‡Ø§Ù†ÙŠ Ø§Ù„Ø±ÙØ§Ø¹ÙŠ</option>
</select>
</div>
</div>

<!-- BACK TO TOP -->
<button class="btt" id="backToTop" onclick="scrollToTop()">â†‘</button>

<script>
// ==============================
// SURAH DATA (All 114 Surahs)
// ==============================
const surahs=[
{n:1,name:"Ø§Ù„ÙØ§ØªØ­Ø©",ay:7,t:"Ù…ÙƒÙŠØ©"},{n:2,name:"Ø§Ù„Ø¨Ù‚Ø±Ø©",ay:286,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:3,name:"Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†",ay:200,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:4,name:"Ø§Ù„Ù†Ø³Ø§Ø¡",ay:176,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:5,name:"Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©",ay:120,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:6,name:"Ø§Ù„Ø£Ù†Ø¹Ø§Ù…",ay:165,t:"Ù…ÙƒÙŠØ©"},
{n:7,name:"Ø§Ù„Ø£Ø¹Ø±Ø§Ù",ay:206,t:"Ù…ÙƒÙŠØ©"},{n:8,name:"Ø§Ù„Ø£Ù†ÙØ§Ù„",ay:75,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:9,name:"Ø§Ù„ØªÙˆØ¨Ø©",ay:129,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:10,name:"ÙŠÙˆÙ†Ø³",ay:109,t:"Ù…ÙƒÙŠØ©"},
{n:11,name:"Ù‡ÙˆØ¯",ay:123,t:"Ù…ÙƒÙŠØ©"},{n:12,name:"ÙŠÙˆØ³Ù",ay:111,t:"Ù…ÙƒÙŠØ©"},
{n:13,name:"Ø§Ù„Ø±Ø¹Ø¯",ay:43,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:14,name:"Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…",ay:52,t:"Ù…ÙƒÙŠØ©"},
{n:15,name:"Ø§Ù„Ø­Ø¬Ø±",ay:99,t:"Ù…ÙƒÙŠØ©"},{n:16,name:"Ø§Ù„Ù†Ø­Ù„",ay:128,t:"Ù…ÙƒÙŠØ©"},
{n:17,name:"Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡",ay:111,t:"Ù…ÙƒÙŠØ©"},{n:18,name:"Ø§Ù„ÙƒÙ‡Ù",ay:110,t:"Ù…ÙƒÙŠØ©"},
{n:19,name:"Ù…Ø±ÙŠÙ…",ay:98,t:"Ù…ÙƒÙŠØ©"},{n:20,name:"Ø·Ù‡",ay:135,t:"Ù…ÙƒÙŠØ©"},
{n:21,name:"Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡",ay:112,t:"Ù…ÙƒÙŠØ©"},{n:22,name:"Ø§Ù„Ø­Ø¬",ay:78,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:23,name:"Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†",ay:118,t:"Ù…ÙƒÙŠØ©"},{n:24,name:"Ø§Ù„Ù†ÙˆØ±",ay:64,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:25,name:"Ø§Ù„ÙØ±Ù‚Ø§Ù†",ay:77,t:"Ù…ÙƒÙŠØ©"},{n:26,name:"Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡",ay:227,t:"Ù…ÙƒÙŠØ©"},
{n:27,name:"Ø§Ù„Ù†Ù…Ù„",ay:93,t:"Ù…ÙƒÙŠØ©"},{n:28,name:"Ø§Ù„Ù‚ØµØµ",ay:88,t:"Ù…ÙƒÙŠØ©"},
{n:29,name:"Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª",ay:69,t:"Ù…ÙƒÙŠØ©"},{n:30,name:"Ø§Ù„Ø±ÙˆÙ…",ay:60,t:"Ù…ÙƒÙŠØ©"},
{n:31,name:"Ù„Ù‚Ù…Ø§Ù†",ay:34,t:"Ù…ÙƒÙŠØ©"},{n:32,name:"Ø§Ù„Ø³Ø¬Ø¯Ø©",ay:30,t:"Ù…ÙƒÙŠØ©"},
{n:33,name:"Ø§Ù„Ø£Ø­Ø²Ø§Ø¨",ay:73,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:34,name:"Ø³Ø¨Ø£",ay:54,t:"Ù…ÙƒÙŠØ©"},
{n:35,name:"ÙØ§Ø·Ø±",ay:45,t:"Ù…ÙƒÙŠØ©"},{n:36,name:"ÙŠØ³",ay:83,t:"Ù…ÙƒÙŠØ©"},
{n:37,name:"Ø§Ù„ØµØ§ÙØ§Øª",ay:182,t:"Ù…ÙƒÙŠØ©"},{n:38,name:"Øµ",ay:88,t:"Ù…ÙƒÙŠØ©"},
{n:39,name:"Ø§Ù„Ø²Ù…Ø±",ay:75,t:"Ù…ÙƒÙŠØ©"},{n:40,name:"ØºØ§ÙØ±",ay:85,t:"Ù…ÙƒÙŠØ©"},
{n:41,name:"ÙØµÙ„Øª",ay:54,t:"Ù…ÙƒÙŠØ©"},{n:42,name:"Ø§Ù„Ø´ÙˆØ±Ù‰",ay:53,t:"Ù…ÙƒÙŠØ©"},
{n:43,name:"Ø§Ù„Ø²Ø®Ø±Ù",ay:89,t:"Ù…ÙƒÙŠØ©"},{n:44,name:"Ø§Ù„Ø¯Ø®Ø§Ù†",ay:59,t:"Ù…ÙƒÙŠØ©"},
{n:45,name:"Ø§Ù„Ø¬Ø§Ø«ÙŠØ©",ay:37,t:"Ù…ÙƒÙŠØ©"},{n:46,name:"Ø§Ù„Ø£Ø­Ù‚Ø§Ù",ay:35,t:"Ù…ÙƒÙŠØ©"},
{n:47,name:"Ù…Ø­Ù…Ø¯",ay:38,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:48,name:"Ø§Ù„ÙØªØ­",ay:29,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:49,name:"Ø§Ù„Ø­Ø¬Ø±Ø§Øª",ay:18,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:50,name:"Ù‚",ay:45,t:"Ù…ÙƒÙŠØ©"},
{n:51,name:"Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª",ay:60,t:"Ù…ÙƒÙŠØ©"},{n:52,name:"Ø§Ù„Ø·ÙˆØ±",ay:49,t:"Ù…ÙƒÙŠØ©"},
{n:53,name:"Ø§Ù„Ù†Ø¬Ù…",ay:62,t:"Ù…ÙƒÙŠØ©"},{n:54,name:"Ø§Ù„Ù‚Ù…Ø±",ay:55,t:"Ù…ÙƒÙŠØ©"},
{n:55,name:"Ø§Ù„Ø±Ø­Ù…Ù†",ay:78,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:56,name:"Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©",ay:96,t:"Ù…ÙƒÙŠØ©"},
{n:57,name:"Ø§Ù„Ø­Ø¯ÙŠØ¯",ay:29,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:58,name:"Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©",ay:22,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:59,name:"Ø§Ù„Ø­Ø´Ø±",ay:24,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:60,name:"Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©",ay:13,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:61,name:"Ø§Ù„ØµÙ",ay:14,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:62,name:"Ø§Ù„Ø¬Ù…Ø¹Ø©",ay:11,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:63,name:"Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†",ay:11,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:64,name:"Ø§Ù„ØªØºØ§Ø¨Ù†",ay:18,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:65,name:"Ø§Ù„Ø·Ù„Ø§Ù‚",ay:12,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:66,name:"Ø§Ù„ØªØ­Ø±ÙŠÙ…",ay:12,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:67,name:"Ø§Ù„Ù…Ù„Ùƒ",ay:30,t:"Ù…ÙƒÙŠØ©"},{n:68,name:"Ø§Ù„Ù‚Ù„Ù…",ay:52,t:"Ù…ÙƒÙŠØ©"},
{n:69,name:"Ø§Ù„Ø­Ø§Ù‚Ø©",ay:52,t:"Ù…ÙƒÙŠØ©"},{n:70,name:"Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬",ay:44,t:"Ù…ÙƒÙŠØ©"},
{n:71,name:"Ù†ÙˆØ­",ay:28,t:"Ù…ÙƒÙŠØ©"},{n:72,name:"Ø§Ù„Ø¬Ù†",ay:28,t:"Ù…ÙƒÙŠØ©"},
{n:73,name:"Ø§Ù„Ù…Ø²Ù…Ù„",ay:20,t:"Ù…ÙƒÙŠØ©"},{n:74,name:"Ø§Ù„Ù…Ø¯Ø«Ø±",ay:56,t:"Ù…ÙƒÙŠØ©"},
{n:75,name:"Ø§Ù„Ù‚ÙŠØ§Ù…Ø©",ay:40,t:"Ù…ÙƒÙŠØ©"},{n:76,name:"Ø§Ù„Ø¥Ù†Ø³Ø§Ù†",ay:31,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:77,name:"Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª",ay:50,t:"Ù…ÙƒÙŠØ©"},{n:78,name:"Ø§Ù„Ù†Ø¨Ø£",ay:40,t:"Ù…ÙƒÙŠØ©"},
{n:79,name:"Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª",ay:46,t:"Ù…ÙƒÙŠØ©"},{n:80,name:"Ø¹Ø¨Ø³",ay:42,t:"Ù…ÙƒÙŠØ©"},
{n:81,name:"Ø§Ù„ØªÙƒÙˆÙŠØ±",ay:29,t:"Ù…ÙƒÙŠØ©"},{n:82,name:"Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±",ay:19,t:"Ù…ÙƒÙŠØ©"},
{n:83,name:"Ø§Ù„Ù…Ø·ÙÙÙŠÙ†",ay:36,t:"Ù…ÙƒÙŠØ©"},{n:84,name:"Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚",ay:25,t:"Ù…ÙƒÙŠØ©"},
{n:85,name:"Ø§Ù„Ø¨Ø±ÙˆØ¬",ay:22,t:"Ù…ÙƒÙŠØ©"},{n:86,name:"Ø§Ù„Ø·Ø§Ø±Ù‚",ay:17,t:"Ù…ÙƒÙŠØ©"},
{n:87,name:"Ø§Ù„Ø£Ø¹Ù„Ù‰",ay:19,t:"Ù…ÙƒÙŠØ©"},{n:88,name:"Ø§Ù„ØºØ§Ø´ÙŠØ©",ay:26,t:"Ù…ÙƒÙŠØ©"},
{n:89,name:"Ø§Ù„ÙØ¬Ø±",ay:30,t:"Ù…ÙƒÙŠØ©"},{n:90,name:"Ø§Ù„Ø¨Ù„Ø¯",ay:20,t:"Ù…ÙƒÙŠØ©"},
{n:91,name:"Ø§Ù„Ø´Ù…Ø³",ay:15,t:"Ù…ÙƒÙŠØ©"},{n:92,name:"Ø§Ù„Ù„ÙŠÙ„",ay:21,t:"Ù…ÙƒÙŠØ©"},
{n:93,name:"Ø§Ù„Ø¶Ø­Ù‰",ay:11,t:"Ù…ÙƒÙŠØ©"},{n:94,name:"Ø§Ù„Ø´Ø±Ø­",ay:8,t:"Ù…ÙƒÙŠØ©"},
{n:95,name:"Ø§Ù„ØªÙŠÙ†",ay:8,t:"Ù…ÙƒÙŠØ©"},{n:96,name:"Ø§Ù„Ø¹Ù„Ù‚",ay:19,t:"Ù…ÙƒÙŠØ©"},
{n:97,name:"Ø§Ù„Ù‚Ø¯Ø±",ay:5,t:"Ù…ÙƒÙŠØ©"},{n:98,name:"Ø§Ù„Ø¨ÙŠÙ†Ø©",ay:8,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:99,name:"Ø§Ù„Ø²Ù„Ø²Ù„Ø©",ay:8,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:100,name:"Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª",ay:11,t:"Ù…ÙƒÙŠØ©"},
{n:101,name:"Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©",ay:11,t:"Ù…ÙƒÙŠØ©"},{n:102,name:"Ø§Ù„ØªÙƒØ§Ø«Ø±",ay:8,t:"Ù…ÙƒÙŠØ©"},
{n:103,name:"Ø§Ù„Ø¹ØµØ±",ay:3,t:"Ù…ÙƒÙŠØ©"},{n:104,name:"Ø§Ù„Ù‡Ù…Ø²Ø©",ay:9,t:"Ù…ÙƒÙŠØ©"},
{n:105,name:"Ø§Ù„ÙÙŠÙ„",ay:5,t:"Ù…ÙƒÙŠØ©"},{n:106,name:"Ù‚Ø±ÙŠØ´",ay:4,t:"Ù…ÙƒÙŠØ©"},
{n:107,name:"Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†",ay:7,t:"Ù…ÙƒÙŠØ©"},{n:108,name:"Ø§Ù„ÙƒÙˆØ«Ø±",ay:3,t:"Ù…ÙƒÙŠØ©"},
{n:109,name:"Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†",ay:6,t:"Ù…ÙƒÙŠØ©"},{n:110,name:"Ø§Ù„Ù†ØµØ±",ay:3,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:111,name:"Ø§Ù„Ù…Ø³Ø¯",ay:5,t:"Ù…ÙƒÙŠØ©"},{n:112,name:"Ø§Ù„Ø¥Ø®Ù„Ø§Øµ",ay:4,t:"Ù…ÙƒÙŠØ©"},
{n:113,name:"Ø§Ù„ÙÙ„Ù‚",ay:5,t:"Ù…ÙƒÙŠØ©"},{n:114,name:"Ø§Ù„Ù†Ø§Ø³",ay:6,t:"Ù…ÙƒÙŠØ©"}
];

// ==============================
// APP STATE
// ==============================
let currentSurah = null;
let currentAyahs = [];
let tafsirData = [];
let selectedAyahNum = null;
let isPlaying = false;
let isRepeat = false;
let playingAyahIndex = 0;
let audioElement = new Audio();
let fontSize = parseInt(localStorage.getItem('qs')||'28');

// ==============================
// INIT
// ==============================
document.addEventListener('DOMContentLoaded',()=>{
    document.getElementById('cyear').textContent=new Date().getFullYear();
    renderSurahList();
    applyTheme(localStorage.getItem('theme')||'light');
    document.documentElement.style.setProperty('--qs',fontSize+'px');
    document.getElementById('fontLabel').textContent=fontSize;

    // Audio events
    audioElement.addEventListener('timeupdate',updateProgress);
    audioElement.addEventListener('ended',onAudioEnded);
    audioElement.addEventListener('loadedmetadata',()=>{
        document.getElementById('durTime').textContent=formatTime(audioElement.duration);
    });

    // Close tooltip on click outside
    document.addEventListener('click',(e)=>{
        if(!e.target.closest('.ayn')&&!e.target.closest('.att')){
            document.getElementById('ayahTooltip').classList.remove('show');
        }
    });

    // Back to top
    window.addEventListener('scroll',()=>{
        document.getElementById('backToTop').classList.toggle('show',window.scrollY>400);
    });

    // Load last read
    const last=localStorage.getItem('lastSurah');
    if(last) loadSurah(parseInt(last));
});

// ==============================
// RENDER SURAH LIST
// ==============================
function renderSurahList(filter=''){
    const list=document.getElementById('surahList');
    list.innerHTML='';
    const f=filter.trim().toLowerCase();
    surahs.forEach(s=>{
        if(f && !s.name.includes(f) && !String(s.n).includes(f)) return;
        const li=document.createElement('li');
        li.className='si'+(currentSurah&&currentSurah.n===s.n?' act':'');
        li.onclick=()=>loadSurah(s.n);
        li.innerHTML=`
            <div class="sn"><span>${s.n}</span></div>
            <div class="s-inf">
                <div class="s-nm">Ø³ÙˆØ±Ø© ${s.name}</div>
                <div class="s-mt"><span>${s.t}</span><span>${s.ay} Ø¢ÙŠØ©</span></div>
            </div>`;
        list.appendChild(li);
    });
}

function filterSurahs(){
    renderSurahList(document.getElementById('searchInput').value);
}

// ==============================
// LOAD SURAH
// ==============================
async function loadSurah(num){
    currentSurah=surahs.find(s=>s.n===num);
    if(!currentSurah)return;

    // Update UI
    document.getElementById('welcomeScreen').style.display='none';
    const sv=document.getElementById('surahView');
    sv.classList.add('show');
    document.getElementById('surahTitle').textContent='Ø³ÙˆØ±Ø© '+currentSurah.name;
    document.getElementById('surahInfo').innerHTML=
        `<span>ØªØ±ØªÙŠØ¨Ù‡Ø§: ${currentSurah.n}</span>
         <span>${currentSurah.t}</span>
         <span>Ø¹Ø¯Ø¯ Ø¢ÙŠØ§ØªÙ‡Ø§: ${currentSurah.ay}</span>`;

    // Bismillah
    const bsm=document.getElementById('bismillah');
    bsm.style.display=(num===1||num===9)?'none':'block';

    // Show loading
    document.getElementById('ayahsContainer').innerHTML=
        '<div class="ldg"><div class="spn"></div><div class="ldg-t">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©...</div></div>';

    // Close tafsir
    closeTafsir();

    // Update sidebar
    renderSurahList(document.getElementById('searchInput').value);

    // Nav buttons
    document.getElementById('prevBtn').disabled=(num<=1);
    document.getElementById('nextBtn').disabled=(num>=114);

    // Save last read
    localStorage.setItem('lastSurah',num);

    // Update player
    document.getElementById('plSurahName').textContent='Ø³ÙˆØ±Ø© '+currentSurah.name;
    document.getElementById('plAyahNum').textContent='â€”';

    // Stop audio
    stopAudio();

    // Scroll
    window.scrollTo({top:0,behavior:'smooth'});

    // Close sidebar on mobile
    if(window.innerWidth<=1024){
        document.getElementById('sidebar').classList.remove('open');
        document.getElementById('overlay').classList.remove('show');
    }

    // Fetch data
    try{
        const res=await fetch(`https://api.alquran.cloud/v1/surah/${num}/quran-uthmani`);
        const data=await res.json();
        if(data.code===200){
            currentAyahs=data.data.ayahs;
            renderAyahs();
        }else{
            throw new Error('API error');
        }
    }catch(err){
        document.getElementById('ayahsContainer').innerHTML=
            `<div class="ldg"><div class="ldg-t" style="color:#c0392b">âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©<br>ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª<br><button class="nb" style="margin-top:10px" onclick="loadSurah(${num})">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button></div></div>`;
    }

    // Fetch tafsir in background
    fetchTafsir(num);
}

// ==============================
// RENDER AYAHS
// ==============================
function renderAyahs(){
    const container=document.getElementById('ayahsContainer');
    let html='';
    currentAyahs.forEach((a,i)=>{
        html+=`<span class="ayt" id="ayah-${a.numberInSurah}" data-idx="${i}">${a.text}</span>`;
        html+=`<span class="ayn" onclick="showAyahOptions(event,${a.numberInSurah})" title="Ø§Ù„Ø¢ÙŠØ© ${a.numberInSurah}">${a.numberInSurah}</span> `;
    });
    container.innerHTML=html;
}

// ==============================
// AYAH OPTIONS TOOLTIP
// ==============================
function showAyahOptions(e,num){
    e.stopPropagation();
    selectedAyahNum=num;
    const tt=document.getElementById('ayahTooltip');
    tt.classList.add('show');

    // Position
    const rect=e.target.getBoundingClientRect();
    let top=rect.bottom+5;
    let left=rect.left;
    if(top+50>window.innerHeight) top=rect.top-50;
    if(left+200>window.innerWidth) left=window.innerWidth-210;
    tt.style.top=top+'px';
    tt.style.left=left+'px';
}

// ==============================
// TAFSIR
// ==============================
async function fetchTafsir(num){
    try{
        const res=await fetch(`https://api.alquran.cloud/v1/surah/${num}/ar.jalalayn`);
        const data=await res.json();
        if(data.code===200) tafsirData=data.data.ayahs;
    }catch(e){
        tafsirData=[];
    }
}

function showTafsir(num){
    document.getElementById('ayahTooltip').classList.remove('show');
    const panel=document.getElementById('tafsirPanel');
    const ayah=currentAyahs.find(a=>a.numberInSurah===num);
    const tafsir=tafsirData.find(a=>a.numberInSurah===num);

    if(ayah){
        document.getElementById('tafsirAyah').textContent=`ï´¿ ${ayah.text} ï´¾ [${num}]`;
    }
    if(tafsir){
        document.getElementById('tafsirText').textContent=tafsir.text;
    }else{
        document.getElementById('tafsirText').textContent='Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙØ³ÙŠØ± Ø¨Ø¹Ø¯ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
    }
    panel.classList.add('show');
    panel.scrollIntoView({behavior:'smooth'});
}

function closeTafsir(){
    document.getElementById('tafsirPanel').classList.remove('show');
}

// ==============================
// COPY AYAH
// ==============================
function copyAyah(num){
    document.getElementById('ayahTooltip').classList.remove('show');
    const ayah=currentAyahs.find(a=>a.numberInSurah===num);
    if(!ayah)return;
    const text=`${ayah.text} ï´¿${num}ï´¾ - Ø³ÙˆØ±Ø© ${currentSurah.name}`;
    navigator.clipboard.writeText(text).then(()=>{
        alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');
    }).catch(()=>{
        // Fallback
        const ta=document.createElement('textarea');
        ta.value=text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');
    });
}

// ==============================
// AUDIO PLAYER
// ==============================
function getAudioUrl(surahNum,ayahNum){
    const reciter=document.getElementById('reciterSelect').value;
    const s=String(surahNum).padStart(3,'0');
    const a=String(ayahNum).padStart(3,'0');
    return `https://everyayah.com/data/${reciter}/${s}${a}.mp3`;
}

function playAyah(num){
    document.getElementById('ayahTooltip').classList.remove('show');
    if(!currentSurah)return;
    playingAyahIndex=currentAyahs.findIndex(a=>a.numberInSurah===num);
    if(playingAyahIndex<0)return;
    playCurrentAyah();
}

function playCurrentAyah(){
    if(playingAyahIndex<0||playingAyahIndex>=currentAyahs.length)return;
    const ayah=currentAyahs[playingAyahIndex];
    const url=getAudioUrl(currentSurah.n,ayah.numberInSurah);

    audioElement.src=url;
    audioElement.play().catch(e=>console.log('Audio play error:',e));
    isPlaying=true;
    updatePlayBtn();
    highlightAyah(ayah.numberInSurah);

    document.getElementById('plSurahName').textContent='Ø³ÙˆØ±Ø© '+currentSurah.name;
    document.getElementById('plAyahNum').textContent='Ø§Ù„Ø¢ÙŠØ© '+ayah.numberInSurah;
}

function togglePlayPause(){
    if(!currentSurah)return;
    if(!audioElement.src||audioElement.src===''){
        // Start from beginning
        playingAyahIndex=0;
        playCurrentAyah();
        return;
    }
    if(isPlaying){
        audioElement.pause();
        isPlaying=false;
    }else{
        audioElement.play().catch(e=>console.log(e));
        isPlaying=true;
    }
    updatePlayBtn();
}

function stopAudio(){
    audioElement.pause();
    audioElement.src='';
    isPlaying=false;
    playingAyahIndex=0;
    updatePlayBtn();
    clearHighlights();
    document.getElementById('progressFill').style.width='0%';
    document.getElementById('curTime').textContent='0:00';
    document.getElementById('durTime').textContent='0:00';
}

function nextAyahAudio(){
    if(!currentSurah)return;
    if(playingAyahIndex<currentAyahs.length-1){
        playingAyahIndex++;
        playCurrentAyah();
    }
}

function prevAyahAudio(){
    if(!currentSurah)return;
    if(playingAyahIndex>0){
        playingAyahIndex--;
        playCurrentAyah();
    }
}

function onAudioEnded(){
    if(isRepeat){
        audioElement.currentTime=0;
        audioElement.play();
        return;
    }
    if(playingAyahIndex<currentAyahs.length-1){
        playingAyahIndex++;
        playCurrentAyah();
    }else{
        isPlaying=false;
        updatePlayBtn();
        clearHighlights();
    }
}

function toggleRepeat(){
    isRepeat=!isRepeat;
    document.getElementById('repeatBtn').style.background=isRepeat?'var(--gold-l)':'';
    document.getElementById('repeatBtn').style.color=isRepeat?'var(--primary)':'';
}

function changeReciter(){
    if(isPlaying){
        playCurrentAyah();
    }
}

function updateProgress(){
    if(audioElement.duration){
        const pct=(audioElement.currentTime/audioElement.duration)*100;
        document.getElementById('progressFill').style.width=pct+'%';
        document.getElementById('curTime').textContent=formatTime(audioElement.currentTime);
    }
}

function seekAudio(e){
    if(!audioElement.duration)return;
    const bar=document.getElementById('progressBar');
    const rect=bar.getBoundingClientRect();
    // RTL adjustment
    const pct=1-((e.clientX-rect.left)/rect.width);
    audioElement.currentTime=pct*audioElement.duration;
}

function updatePlayBtn(){
    document.getElementById('playPauseBtn').textContent=isPlaying?'â¸':'â–¶';
}

function highlightAyah(num){
    clearHighlights();
    const el=document.getElementById('ayah-'+num);
    if(el){
        el.classList.add('playing');
        el.scrollIntoView({behavior:'smooth',block:'center'});
    }
}

function clearHighlights(){
    document.querySelectorAll('.ayt.playing').forEach(el=>el.classList.remove('playing'));
}

function formatTime(s){
    if(!s||isNaN(s))return'0:00';
    const m=Math.floor(s/60);
    const sec=Math.floor(s%60);
    return m+':'+(sec<10?'0':'')+sec;
}

// ==============================
// NAVIGATION
// ==============================
function navigateSurah(dir){
    if(!currentSurah)return;
    const next=currentSurah.n+dir;
    if(next>=1&&next<=114) loadSurah(next);
}

// ==============================
// FONT SIZE
// ==============================
function changeFontSize(delta){
    fontSize=Math.max(16,Math.min(48,fontSize+delta));
    document.documentElement.style.setProperty('--qs',fontSize+'px');
    document.getElementById('fontLabel').textContent=fontSize;
    localStorage.setItem('qs',fontSize);
}

// ==============================
// THEME
// ==============================
function toggleTheme(){
    const cur=document.documentElement.getAttribute('data-theme');
    const next=cur==='dark'?'light':'dark';
    applyTheme(next);
    localStorage.setItem('theme',next);
}

function applyTheme(theme){
    if(theme==='dark'){
        document.documentElement.setAttribute('data-theme','dark');
    }else{
        document.documentElement.removeAttribute('data-theme');
    }
}

// ==============================
// SIDEBAR TOGGLE
// ==============================
function toggleSidebar(){
    document.getElementById('sidebar').classList.toggle('open');
    document.getElementById('overlay').classList.toggle('show');
}

// ==============================
// SCROLL
// ==============================
function scrollToTop(){
    window.scrollTo({top:0,behavior:'smooth'});
}
</script>
</body>

</html>
